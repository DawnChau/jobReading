### 1. TCP 安全性体现在哪些方面，采用了哪些机制

- 检验和
  - TCP必选，UDP可选
- 序列号
  - 保证可靠性，知道少了哪个
  - 保证数据按序到达
  - 提高效率，多次发送，一次确认
  - 去除重复数据
- 确认应答机制：ACK
  - 确认：发送接着的
  - 不确认：重传
- 超时重传机制
- 三次握手
  - 第一次：SYN
  - 第二次：SYN/ACK
  - 第三次：ACK
- 四次挥手
  - FIN
  - ACK
  - FIN
  - ACK
- 流量控制：发送端根据接收端的处理能力，来决定发送端的速度、
  - 接收端将自身缓冲区大小放入16位窗口长度中
- 拥塞控制
  - 慢启动->指数增长->线性增长->重置为1

### 2. 浏览器从发送HTTP请求到返回HTML的过程

- 浏览器查找域名的ip地址
  - 浏览器缓存中
  - 系统缓存中
  - 路由缓存中
  - ISP的DNS缓存中
- 浏览器给web服务器发送http请求
- 服务器请求处理
- 服务器返回HTML响应
- 浏览器显示HTML
- 浏览器发送请求获取CSS，JS

### 3. 正向代理和反向代理

- 正向代理：
  - 代理客户端去访问服务器
    - 访问原来无法访问的资源
    - 可以做缓存，加速访问
    - 对客户端访问进行授权，上网进行认证
- 反向代理：
  - 代理服务器接收请求，将请求转发给内网服务器
    - 保证内网安全
    - 负载均衡

### 4. TCP为什么需要三次握手，四次断开

- 三次握手防止已经失效的连接请求报文段突然又传输给了服务器
  - 节约server资源
- TCP有半关闭状态，A发完FIN之后，A不再发送数据，但是如果B发送数据，A还能收到。
  - B还要给A发送连接释放报文，然后A发送确认
  - 接收到FIN只意味着没有数据再发过来了

### 5. TCP和UDP的区别

- TCP 传输控制协议：
  - 面向连接，可靠
  - 超时重传，丢弃重复数据，检验数据，流量控制
- UDP：数据宝协议
  - 面向无连接，不可靠
  - 主要用于流媒体服务

### 6. 交换机与路由器的区别

- 交换机
  - 在第二层数据链路层
  - 根据MAC地址寻址
  - 转发速度快
- 路由器
  - 在第三层网络层
  - 根据IP地址寻址
  - 转发速度慢

### 7. TCP拥塞控制

- 防止网络过载
- 代价：需要获取网络内部的流量分布信息，拥塞控制前需要在节点之间交换信息和各种命令，带来额外的开销
- 方法：
  - 慢开始：发送方维护拥塞窗口，初始cwnd = 1，每个轮次加倍
  - 拥塞避免：每个轮次+1，拥塞之后ssthresh变成拥塞时候的一半。cwnd = 1。
    - 目的是减少主机发送的分组数，路由器有时间处理掉积压的分组
  - 快重传
    - TCP通过三个相同的ACK来判定数据包的丢失
    - ssthresh设置为cwnd的一半
    - cwnd再设置为ssthresh的值+3
  - 快恢复
    - 再收到重复的ACK，cwnd增加1
    - 再收到新的ACK时候，cwnd设置为ssthresh，重新进入拥塞避免阶段

### 8. ARP地址解析协议的工作原理

- ARP缓冲区建立ARP列表，表示IP地址和MAC地址的对应关系
- 每次发送消息，检查列表，没有的话则向本网段所有主机发送ARP数据包
- 每台机器收到后检查是不是自己的，是则将对方的IP地址MAC地址记录在自己的列表里，并回复

### 9. ICMP协议

- IP主机，路由器之间传输控制消息
  - 差错报告报文
  - 询问报文

### 10. DHCP 协议

- 集中的管理，分配IP地址
- 使得网络环境中的主机动态的获取IP地址，DNS服务器地址等信息

### 11. 运输层协议和网络层协议的区别

- 网络层协议主要负责提供主机之间的逻辑通信
- 运输层协议主要负责提供进程之间的逻辑通信

### 12. HTTP长连接和短连接

- 短连接：浏览器和服务器进行一次HTTP操作，就建立一次连接
- 长连接：一次TCP可以传输多个HTTP，同Keep-Alive来控制

### 13. IO中异步与非异步，阻塞与非阻塞的区别

- 同步
  - 发出调用，调用没结果，就不返回
- 异步
  - 发出调用，调用直接返回，没有返回结果。被调用者通过通知，回调函数来告诉调用者结果
- 阻塞
  - 调用结果返回前，该线程会被挂起
- 非阻塞
  - 不能立刻得到结果之前，该函数不会阻塞当前线程，而会立刻返回
- 线程通过一个函数A，去调用另外一个函数B
  - 函数B立刻返回，异步非阻塞
  - 函数B没有返回，函数A等着B返回结果，同步阻塞
  - 函数B没有立刻返回，函数B不会阻塞当前线程，立刻返回。异步阻塞

### 14. **为什么TIME_WAIT状态还需要等2\*MSL（**Max SegmentLifetime，最大分段生存期）秒之后才能返回到CLOSED状态呢？

- 主动关闭端最后发送ACK
- 发送的ACK对方可能没收到导致对方重发FIN
- 所以要等待连个MSL，才进入CLOSED状态






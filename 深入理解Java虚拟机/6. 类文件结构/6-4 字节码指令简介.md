## 6-4 字节码指令简介

- Java虚拟机采用操作数栈结构

### 6-4-1 字节码与数据类型

- 大部分的指令都没有支持整数类型byte，char和short，甚至没有任何指令支持boolean类型。
- 编译器会在编译期或者运行期将byte和short类型的数据带符号扩展为int类型的数据

### 6-4-2 加载和存储指令

- 存储数据的操作数栈和局部变量表主要就是由加载和存储指令进行操作

### 6-4-4 类型转换指令

- int或long转换为窄类型时候，可能会丢失符号，因为会截掉高位

### 6-4-5 对象创建与访问指令

- 类实例和数组的创建与操作使用了不同的字节码指令

### 6-4-8 方法调用和返回指令

- invokevirtual：调用对象的实例方法
- invokeinterface：调用接口方法，运行时搜索实现了接口的对象
- invokespecial：实例初始化方法，私有方法，父类方法
- invokestatic：调动类方法

### 6-4-9 异常处理指令

- 处理异常不是由字节码指令来实现的
- 采用异常表来实现的

### 6-4-10 同步指令

- 使用管程来实现Monitor
- 同步方法：
  - 若是检查设置了ACC_SYNCHRONIZED，则执行现场必须先获取管程
- 同步代码块：
  - monitorenter
  - monitorexit
  - 编译器会自动产生一个异常处理器，确保必须执行monitorexit

## 6-5 公有设计和私有实现

- JIT生成技术：将Java虚拟机代码在加载或执行时翻译成宿主CPU的本地指令集


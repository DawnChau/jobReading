## 5-2 案例分析

### 5-2-1 高性能硬件上的程序部署策略

- 采用64位JDK来使用大内存
- 使用若干个32位虚拟机建立逻辑集群来利用硬件资源
- 现阶段64位JDK的性能测试结果普遍低于32位JDK
- 相同程序在64位JDK消耗的内存一般比32位JDK大
- CMS适用于对CPU资源敏感低

### 5-2-3 堆外内存导致的溢出错误

- 线程堆栈可以通过-Xss调整大小

### 5-2-4 外部命令导致系统缓慢

- Runtime.getRuntime().exec()，Java虚拟机会克隆一个和当前虚拟机拥有一样环境变量的进程，再用这个新的进行去执行外部命令，最后再退出这个进程。如果频繁执行这个操作，系统的消耗会很大

### 5-2-5 服务器JVM进程崩溃

- 将异步调用改为生产者/消费者的消息队列实现更好

### 5-2-6 不恰当的数据结构导致内存占用过大

- `HashMap<Long,Long>`，空间利用率特别低 